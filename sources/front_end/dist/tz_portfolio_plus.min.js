!function(t,e,o){"use strict";function r(t,e,o){return o&&"auto"!=o||!t.last().attr("data-order")||!t.last().data("order").toString().length||(o="filter_asc"),t.sort(function(t,e){var r=jQuery(t).data("order")?parseInt(jQuery(t).data("order"),10):jQuery(t).text().trim(),a=jQuery(e).data("order")?parseInt(jQuery(e).data("order"),10):jQuery(e).text().trim();if("*"!=jQuery(t).attr("data-option-value")&&"*"!=jQuery(e).attr("data-option-value")){if("asc"==o.substr(o.length-3,o.length).toLowerCase())return r<a?-1:r>a?1:0;if("desc"==o.substr(o.length-4,o.length).toLowerCase())return r>a?-1:r<a?1:0}}),t.each(function(t,o){e.append(o).append("\n")}),!0}o.infiniteScroll={addAjaxComplete:function(t){this.ajaxCompletes.push(t)},ajaxCompletes:[]};var a={lastClickAvailabled:!1,createCookie:function(t,e,o){if(o){var r=new Date;r.setTime(r.getTime()+24*o*60*60*1e3);var a="; expires="+r.toGMTString()}else a="";document.cookie=t+"="+e+a+"; path=/"},readCookie:function(t){for(var e=t+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var a=o[r];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null},eraseCookie:function(t){createCookie(t,"",-1)},goToByScroll:function(e){t("html,body").animate({scrollTop:t("#"+e).offset().top},"slow")}};t.tzPortfolioPlusIsotope=function(o,i){var n=t(o),l=t.extend(!0,{},t.tzPortfolioPlusIsotope.defaults),s=t.extend(!0,l,i);s.params.orderby_sec.length||(s.params.orderby_sec="rdate");var c=s.params,d=s.isotope_options;switch(c.orderby_sec){default:d.core.sortBy="original-order",d.core.sortAscending=!0;break;case"order":case"rorder":d.core.sortBy="original-order",d.core.sortAscending=!0;break;case"date":d.core.sortBy="date",d.core.sortAscending=!0,s.timeline&&(d.core.sortAscending=!1);break;case"rdate":d.core.sortBy="date",d.core.sortAscending=!1;break;case"alpha":d.core.sortBy="name",d.core.sortAscending=!0;break;case"ralpha":d.core.sortBy="name",d.core.sortAscending=!1;break;case"author":case"rauthor":d.core.sortBy="date",d.core.sortAscending=!1;break;case"hits":d.core.sortBy="hits",d.core.sortAscending=!1;break;case"rhits":d.core.sortBy="hits",d.core.sortAscending=!0}return d.core.layoutMode.length||(c.layout_type.length?d.core.layoutMode=c.layout_type[0]:d.core.layoutMode="masonry"),n.tz_init=function(e){var o,a,i=t(s.mainElementSelector).width(),l=c.tz_column_width,f=0,u=0,p=0;i<n.width()&&(i=n.width()),s.columnWidth&&(l=s.columnWidth),s.timeline&&t.extend(!0,t.Isotope.prototype,{_sort:function(){var e=this.options.sortBy,o=this._getSorter,r=this.options.sortAscending?1:-1;this.$filteredAtoms.sort(function(a,i){var n=o(a,e),l=o(i,e);if(n===l&&"original-order"!==e&&(n=o(a,"original-order"),l=o(i,"original-order")),"name"==e||"hits"==e){if(t(a).attr("data-category")>t(i).attr("data-category"))return 0;if(t(a).attr("data-category")==t(i).attr("data-category"))return t(a).hasClass("TzDate")?0:n>l?1*r:0}return(n>l?1:n<l?-1:0)*r})}}),o=Math.floor(i/l),s.beforeCalculateColumn(o),u=i,p=i,(f=(a=o+1)-i/l>i/l-o?o:a)>1&&(p=2*(u=Math.floor(i/f))),s.afterCalculateColumn(f,u),n.find(".element").width(u),n.find(s.elementFeatureSelector).width(p),n.find(".element").find(".element.TzDate").width(i),s.afterColumnWidth(f,u),e&&n.find(".element").css({opacity:0}),n.imagesLoaded(function(){s.afterImagesLoaded(),e&&n.find(".element").css({opacity:1}),n.isotope({resizable:!1,itemSelector:d.core.itemSelector,layoutMode:d.core.layoutMode,sortBy:d.core.sortBy,sortAscending:d.core.sortAscending,filter:d.core.filter,masonry:{columnWidth:u},getSortData:d.core.getSortData},function(){parseInt(c.tz_show_filter,10)&&c.filter_tags_categories_order&&r(t(d.sortParentTag).find(d.sortChildTag),t(d.sortParentTag),c.filter_tags_categories_order),d.complete(),n.afterLoadPortfolio()})})},n.loadPortfolio=function(){var o=t(d.filterSelector).find(d.tagFilter),r=null,a=d.core;o.click(function(o){o.preventDefault();var i=t(this);if(i.hasClass("selected"))return!1;var l=i.parents(".option-set");l.find(".selected").removeClass("selected"),i.addClass("selected");var s=a,d=l.attr("data-option-key"),f=i.attr("data-option-value");return f="false"!==f&&f,s[d]=f,"layoutMode"===d&&"function"==typeof e.changeLayoutMode?e.changeLayoutMode(i,s):("name"==f&&("alpha"==c.orderby_sec||"alpha"!=c.orderby_sec&&"ralpha"!=c.orderby_sec?s.sortAscending=!0:"ralpha"==c.orderby_sec&&(s.sortAscending=!1)),"date"==f&&("rdate"==c.orderby_sec||"date"!=c.orderby_sec&&"rdate"!=c.orderby_sec?s.sortAscending=!1:"date"==c.orderby_sec&&(s.sortAscending=!0)),"hits"==f&&("hits"==c.orderby_sec||"hits"!=c.orderby_sec&&"rhits"!=c.orderby_sec?s.sortAscending=!1:"rhits"==c.orderby_sec&&(s.sortAscending=!0)),s=t.extend(r,s),n.isotope(s),r=s),!1})},n.triggerOnClickItem=function(){t(d.core.itemSelector).find("a").click(function(e){a.createCookie("tppLatestItem",t(this).closest(d.core.itemSelector).attr("id"),.5)})},n.afterLoadPortfolio=function(){if("undefined"!==s.params.remember_recent_article&&1==s.params.remember_recent_article){var e=a.readCookie("tppLatestItem");null!=e&&!a.lastClickAvailabled&&t("#"+e).length&&(a.goToByScroll(e),a.lastClickAvailabled=!0)}},n.tz_init(!0),t(d.filterSelector+"[data-option-key=sortBy]").children().removeClass("selected").end().find("[data-option-value="+d.core.sortBy+"]").addClass("selected"),n.loadPortfolio(),n.triggerOnClickItem(),n.vars=s,t.data(o,"tzPortfolioPlusIsotope",n),t(e).smartresize(function(){n.tz_init()}),this},t.tzPortfolioPlusIsotope.defaults={columnWidth:"",mainElementSelector:"#TzContent",containerElementSelector:"#portfolio",elementFeatureSelector:".tz_feature_item",JSON:{},timeline:!1,params:{orderby_sec:"rdate",tz_show_filter:1,filter_tags_categories_order:"auto",tz_portfolio_plus_layout:"ajaxButton",comment_function_type:"default",tz_filter_type:"categories",show_all_filter:0,tz_comment_type:"disqus",tz_show_count_comment:1,tz_column_width:233,layout_type:["masonry"]},isotope_options:{core:{itemSelector:".element",layoutMode:"",sortBy:"date",sortAscending:!1,filter:"*",getSortData:{date:function(t){var e=t.hasClass("element")&&t.attr("data-date").length?t.attr("data-date"):t.find(".create").text();return parseInt(e,10)},hits:function(t){var e=t.hasClass("element")&&t.attr("data-hits").length?t.attr("data-hits"):t.find(".hits,.tpp-item-hit").text();return parseInt(e,10)},name:function(t){var e=t.hasClass("element")&&t.find(".TzPortfolioTitle.name,.tpp-item-title.name").length?t.find(".TzPortfolioTitle.name, .tpp-item-title.name").text().trim():t.attr("data-title").length?t.attr("data-title"):"";return e.length?e:t.text().trim()}}},filterSelector:"#tz_options .option-set",tagFilter:"a",sortParentTag:"#filter",sortChildTag:"a",complete:function(){}},beforeCalculateColumn:function(){},afterCalculateColumn:function(){},afterColumnWidth:function(){},afterImagesLoaded:function(){}},t.fn.tzPortfolioPlusIsotope=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){void 0===t(this).data("tzPortfolioPlusIsotope")?new t.tzPortfolioPlusIsotope(this,e):t(this).data("tzPortfolioPlusIsotope")})},t.tzPortfolioPlusInfiniteScroll=function(i,n){var l=t(i),s=t.extend(!0,t.tzPortfolioPlusInfiniteScroll.defaults,n),c=s.params,d=!0,f=t("div.TzDate:last").attr("data-category");if(l.infinitescroll({navSelector:s.navSelector,nextSelector:s.nextSelector,itemSelector:s.itemSelector,dataType:s.dataType,template:function(e){if(e){if(e.filter){var o=(o=t(e.filter)).map(function(){if(-1==t(s.sortParentTag).find(s.sortChildTag+'[data-option-value="'+t(this).data("option-value")+'"]').index())return this});t(s.sortParentTag).append(o),l.data("tzPortfolioPlusIsotope").loadPortfolio(),r(t(s.sortParentTag).find(s.sortChildTag),t(s.sortParentTag),c.filter_tags_categories_order)}return e.articles}},errorCallback:function(){s.errorCallback||(s.loadedText=tzNoMorePageLoadText,c.tz_portfolio_plus_layout&&"ajaxButton"!=c.tz_portfolio_plus_layout||t("#tz_append a").unbind("click").html(s.loadedText).show(),tzDisplayNoMorePageLoad?("ajaxInfiScroll"==c.tz_portfolio_plus_layout&&t("#tz_append").removeAttr("style").html('<a class="tzNomore">'+s.loadedText+"</a>"),t("#tz_append a").addClass("tzNomore")):t("#tz_append").empty(),t("#infscr-loading").remove())},loading:{msgText:s.msgText,finishedMsg:"",img:"",selector:"#tz_append"}},function(e,r,i){var n=e;if(e){if(e.articles&&!r.appendCallback){var u=t("<div/>");u.append(e.articles),n=u.children().get(),l.append(n)}t("#infscr-loading").css("display","none");var p=t(n).css({opacity:0});p.imagesLoaded(function(){p.animate({opacity:1});var i=l.data("tzPortfolioPlusIsotope");if(i.tz_init(),s.timeline)i.isotope("insert",p),p.each(function(){if(t(this).attr("class").match(/.*?TzDate.*?/i)){var e=t(this).attr("data-category");f==e?(t(this).remove(),i.isotope("reloadItems")):f=e}});else{if(i.isotope("appended",p),e.filter&&!r.appendCallback){var n=(n=t(e.filter)).map(function(){if(-1==t(s.sortParentTag).find(s.sortChildTag+'[data-option-value="'+t(this).data("option-value")+'"]').index())return this});t(s.sortParentTag).append(n),i.loadPortfolio()}i.afterLoadPortfolio(),i.triggerOnClickItem()}if(0,d=!0,p.length&&t("div#tz_append").find("a:first").show(),o.infiniteScroll.ajaxCompletes.length&&t.each(o.infiniteScroll.ajaxCompletes,function(t,e){"function"==typeof e&&e(p,i)}),"ajaxInfiScroll"==c.tz_portfolio_plus_layout||"ajaxButton"==c.tz_portfolio_plus_layout){var u=a.readCookie("tppLatestItem");null!=u&&(t("#"+u).length||l.infinitescroll("retrieve"))}})}}),"ajaxInfiScroll"==c.tz_portfolio_plus_layout&&(t(e).scroll(function(){t(e).unbind(".infscr"),d&&t(e).scrollTop()+t(e).height()>=l.offset().top+l.height()&&(d=!1,l.infinitescroll("retrieve"))}),t(e).bind("load resize",function(){t(document).height()<=t(e).height()&&l.infinitescroll("retrieve")})),c.tz_portfolio_plus_layout&&"ajaxButton"!=c.tz_portfolio_plus_layout||(t(e).unbind(".infscr"),t("div#tz_append a").click(function(){t(this).stop(),t("div#tz_append").find("a:first").hide(),l.infinitescroll("retrieve")})),"ajaxInfiScroll"==c.tz_portfolio_plus_layout||"ajaxButton"==c.tz_portfolio_plus_layout){var u=a.readCookie("tppLatestItem");null!=u&&(t("#"+u).length||l.infinitescroll("retrieve"))}},t.tzPortfolioPlusInfiniteScroll.defaults={rootPath:"",msgText:'<i class="tz-icon-spinner tz-spin"></i><em>Loading the next set of posts...</em>',loadedText:"No more items to load",navSelector:"#loadaj a",nextSelector:"#loadaj a:first",itemSelector:".element",dataType:"json",Itemid:null,commentText:"Comment count:",timeline:!1,sortParentTag:"#filter",sortChildTag:"a",lang:"",errorCallback:null,ajaxComplete:function(){}},t.fn.tzPortfolioPlusInfiniteScroll=function(e){void 0===e&&(e={}),"object"==typeof e&&(void 0===t(this).data("tzPortfolioPlusInfiniteScroll")?new t.tzPortfolioPlusInfiniteScroll(this,e):t(this).data("tzPortfolioPlusInfiniteScroll"))}}(jQuery,window,window.TZ_Portfolio_Plus);